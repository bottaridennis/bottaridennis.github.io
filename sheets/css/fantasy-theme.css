@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=MedievalSharp&display=swap');

:root {
    --bg0: #1e140d;
    --bg1: #2d1f18;
    --glass: rgba(60, 40, 25, 0.65);
    --glass2: rgba(80, 50, 30, 0.45);
    --stroke: rgba(212, 175, 55, 0.3); /* Goldish */
    --muted: rgba(224, 214, 200, 0.7);
    --muted2: rgba(224, 214, 200, 0.55);
    --shadow: 0 18px 55px rgba(0, 0, 0, 0.5);
    --r: 12px;
    --text-primary: #f5e6d3; /* Parchment white */
    --text-secondary: rgba(245, 230, 211, 0.7);
    --gold: #d4af37;
    --crimson: #7a1f1f;
}

body {
    font-family: 'MedievalSharp', cursive;
    background-color: var(--bg0) !important;
    background: 
        radial-gradient(circle at 20% 20%, #3a251a 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, #2d1f18 0%, transparent 50%),
        linear-gradient(180deg, var(--bg0) 0%, var(--bg1) 100%) !important;
    color: var(--text-primary) !important;
    min-height: 100vh;
}

/* Force dark theme on all containers */
.glass-card, .card, .modal-content {
    background: linear-gradient(135deg, #2d1f18, #37251d) !important;
    border: 1px solid var(--stroke) !important;
    box-shadow: inset 0 0 20px rgba(0,0,0,0.5), var(--shadow) !important;
    color: var(--text-primary) !important;
    backdrop-filter: none !important;
}

/* Fix Inputs and Form Controls to be dark */
.form-control, 
.form-select, 
input, 
textarea, 
select,
.form-control-glass {
    background-color: #2d1f18 !important;
    border: 1px solid rgba(212, 175, 55, 0.3) !important;
    color: var(--gold) !important;
    font-family: 'MedievalSharp', cursive !important;
    backdrop-filter: none !important;
}

.form-control:focus, 
.form-select:focus, 
input:focus, 
textarea:focus, 
select:focus {
    background-color: #3c2820 !important;
    border-color: var(--gold) !important;
    box-shadow: 0 0 10px rgba(212, 175, 55, 0.2) !important;
    color: #fff !important;
}

/* Labels and text must be visible */
label, .form-label, span, p, div {
    color: inherit;
}

label, .form-label {
    color: var(--gold) !important;
    font-family: 'Cinzel', serif !important;
    text-transform: uppercase;
    font-size: 0.85rem;
    letter-spacing: 0.5px;
}

/* Placeholder color fix */
::placeholder {
    color: rgba(212, 175, 55, 0.4) !important;
    opacity: 1;
}

/* Navbar specific styling to ensure visibility */
.navbar,
.glass-nav {
    z-index: 9999 !important;
    background: #28190f !important;
    border-bottom: 1px solid var(--gold) !important;
    box-shadow: 0 4px 20px rgba(0,0,0,0.5) !important;
    backdrop-filter: none !important;
    opacity: 1 !important;
}

.navbar .container {
    z-index: 10000 !important;
    position: relative !important;
}

.navbar .btn,
.glass-nav .btn,
.glass-nav .btn-outline-light,
.glass-nav a.btn {
    border: 1px solid var(--gold) !important;
    color: var(--gold) !important;
    background: #2d1f18 !important;
    font-family: 'Cinzel', serif;
    text-transform: uppercase;
    letter-spacing: 1px;
    opacity: 1 !important;
    visibility: visible !important;
    display: inline-flex !important;
    align-items: center;
    justify-content: center;
    position: relative !important;
    z-index: 10001 !important;
}

/* Ensure icons inside buttons are visible */
.navbar .btn i,
.glass-nav .btn i,
.navbar .btn span,
.glass-nav .btn span {
    color: var(--gold) !important;
    opacity: 1 !important;
    visibility: visible !important;
    z-index: 10002 !important;
}

.navbar-brand,
.navbar-brand span,
.navbar-brand i {
    color: var(--gold) !important;
    text-shadow: 0 0 5px rgba(212, 175, 55, 0.3);
    opacity: 1 !important;
    visibility: visible !important;
    z-index: 10001 !important;
    position: relative !important;
}

.navbar-toggler {
    border-color: var(--gold) !important;
    z-index: 10001 !important;
    position: relative !important;
    opacity: 1 !important;
    visibility: visible !important;
}

html[data-theme="light"] .navbar-toggler-icon,
.navbar-toggler-icon {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(212, 175, 55, 1)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e") !important;
    opacity: 1 !important;
    visibility: visible !important;
    filter: none !important;
}

.navbar-collapse {
    z-index: 10000 !important;
    background: #28190f !important;
}

/* Floating Nav Styling (Mobile) */
.floating-nav {
    background: #28190f !important;
    border: 1px solid var(--gold) !important;
    backdrop-filter: none !important;
    box-shadow: 0 -5px 20px rgba(0,0,0,0.5) !important;
    z-index: 10000 !important;
}

.floating-nav__item {
    color: var(--muted) !important;
}

.floating-nav__item.active,
.floating-nav__item.active i {
    color: var(--gold) !important;
    text-shadow: 0 0 10px rgba(212, 175, 55, 0.5) !important;
}

.navbar .btn:hover,
.glass-nav .btn:hover,
.glass-nav .btn-outline-light:hover,
.glass-nav a.btn:hover {
    background: rgba(212, 175, 55, 0.2) !important;
    box-shadow: 0 0 10px rgba(212, 175, 55, 0.4) !important;
    color: #fff !important;
}

/* Specific button overrides */
.btn-outline-success {
    border-color: #4caf50 !important;
    color: #4caf50 !important;
}

.btn-outline-success:hover {
    background-color: #4caf50 !important;
    color: #fff !important;
}

.btn-outline-info {
    border-color: #2196f3 !important;
    color: #2196f3 !important;
}

.btn-outline-info:hover {
    background-color: #2196f3 !important;
    color: #fff !important;
}

.btn-outline-danger {
    border-color: #f44336 !important;
    color: #f44336 !important;
}

.btn-outline-danger:hover {
    background-color: #f44336 !important;
    color: #fff !important;
}

/* Ability Scores */
.ability {
    background: #2d1f18 !important;
    border: 1px solid var(--gold) !important;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.5) !important;
    backdrop-filter: none !important;
}

.ability__head {
    background: linear-gradient(to right, transparent, rgba(212, 175, 55, 0.1), transparent) !important;
    border-bottom: 1px solid rgba(212, 175, 55, 0.2) !important;
}

.ability__head i, 
.ability__head span {
    color: var(--gold) !important;
    text-shadow: 0 0 5px rgba(212, 175, 55, 0.3);
}

.ability__score {
    color: #fff !important;
    text-shadow: 2px 2px 0 #000;
}

.ability__mod {
    background: #1e140d !important;
    border: 1px solid var(--gold) !important;
    color: var(--gold) !important;
}

/* Quick Summary Boxes */
.quick {
    background: #2d1f18 !important;
    border: 1px solid var(--gold) !important;
    border-radius: 4px !important;
    backdrop-filter: none !important;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.3) !important;
}

.quick__k {
    color: var(--text-secondary) !important;
    font-family: 'Cinzel', serif !important;
    text-transform: uppercase;
}

.quick__v {
    color: var(--gold) !important;
    font-family: 'MedievalSharp', cursive !important;
    text-shadow: 0 0 5px rgba(212, 175, 55, 0.3);
}

/* Condition Chips */
.chip, .condition-chip {
    background: #1e140d !important;
    border: 1px solid var(--gold) !important;
    color: var(--gold) !important;
    font-family: 'Cinzel', serif !important;
}

.chip-alt {
    background: var(--gold) !important;
    color: #1e140d !important;
    border: 1px solid var(--gold) !important;
    font-weight: bold;
}

.condition-chip.active {
    background: var(--gold) !important;
    color: #1e140d !important;
    box-shadow: 0 0 10px rgba(212, 175, 55, 0.6) !important;
}

/* Table overrides */
.table-glass {
    background: transparent !important;
    color: var(--text-primary) !important;
}

.table-glass th {
    border-bottom: 1px solid var(--gold) !important;
    color: var(--gold) !important;
    font-family: 'Cinzel', serif !important;
}

.table-glass td {
    border-bottom: 1px solid rgba(212, 175, 55, 0.1) !important;
    color: var(--text-primary) !important;
}

/* Button Glow effect replacement */
.btn-glow {
    background: linear-gradient(to bottom, #5a3a2a, #2d1f18) !important;
    border: 1px solid var(--gold) !important;
    box-shadow: 0 0 10px rgba(212, 175, 55, 0.15) !important;
    color: var(--gold) !important;
    font-family: 'Cinzel', serif !important;
}

.btn-glow:hover {
    background: linear-gradient(to bottom, #7a4a3a, #3a251a) !important;
    box-shadow: 0 0 20px rgba(212, 175, 55, 0.4) !important;
    color: #fff !important;
}



/* Custom Round Checkboxes */
.prof-check {
    appearance: none;
    -webkit-appearance: none;
    width: 1.3em;
    height: 1.3em;
    border: 1px solid var(--gold) !important;
    border-radius: 50% !important;
    background: #2d1f18 !important;
    cursor: pointer;
    position: relative;
    vertical-align: text-bottom;
    margin-right: 0.4rem;
    transition: all 0.2s ease;
}

.prof-check:checked {
    background: var(--gold) !important;
    box-shadow: 0 0 10px rgba(212, 175, 55, 0.6) !important;
}

.prof-check:checked::after {
    content: 'âœ”';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #0f0a05; /* Dark text for contrast against gold */
    font-size: 0.8em;
    font-weight: 900;
    font-family: system-ui, -apple-system, sans-serif; /* Ensure standard checkmark */
}

.prof-check:hover {
    border-color: #fff !important;
    box-shadow: 0 0 5px rgba(212, 175, 55, 0.4) !important;
}

/* Search Highlight */
.search-highlight {
    box-shadow: 0 0 15px var(--gold) !important;
    border-color: var(--gold) !important;
    transition: all 0.3s ease;
    position: relative;
    z-index: 5;
}

.search-highlight-text {
    color: var(--gold) !important;
    text-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
    font-weight: bold;
}

/* Search Bar Theming */
.search-wrap {
    background: #2d1f18 !important;
    border: 1px solid var(--gold) !important;
}

.search-wrap i {
    color: var(--gold) !important;
}

.search-input {
    color: var(--gold) !important;
    font-family: 'MedievalSharp', cursive !important;
}

.search-input::placeholder {
    color: rgba(212, 175, 55, 0.5) !important;
}

/* Readonly fields styling to look like text */
input[readonly], 
.mini-input[readonly], 
.form-control[readonly] {
    background-color: transparent !important;
    border: none !important;
    box-shadow: none !important;
    color: var(--gold) !important;
    text-align: right;
    padding-right: 0;
    cursor: default;
    font-weight: bold;
}

/* --- Spell/Feature/Invocation Card Overrides --- */

/* Override spell card background and borders */
.spell-card,
.spell-card.v2,
.feature-card,
.invocation-card {
    background: linear-gradient(135deg, #2d1f18, #37251d) !important;
    border: 1px solid var(--stroke) !important;
    box-shadow: inset 0 0 20px rgba(0,0,0,0.5), var(--shadow) !important;
    color: var(--text-primary) !important;
    backdrop-filter: none !important;
}

/* Remove glass effects from pseudo-elements on cards */
.spell-card.v2::before,
.spell-card.v2::after,
.feature-card::before,
.feature-card::after,
.invocation-card::before,
.invocation-card::after {
    display: none !important;
}

/* Description box in modals */
.desc-box {
    background: #2d1f18 !important;
    border: 1px solid var(--gold) !important;
    color: var(--text-primary) !important;
}

.desc-box strong {
    color: var(--gold) !important;
}

/* Bootstrap badges override */
.badge.bg-secondary,
.badge.bg-info {
    background-color: var(--bg1) !important;
    border: 1px solid var(--gold) !important;
    color: var(--gold) !important;
    font-family: 'Cinzel', serif !important;
    text-transform: uppercase;
    font-size: 0.75em !important;
}

/* Remove glass effects from badges and make them solid/fantasy */
.badge-glass {
    background-color: var(--bg1) !important;
    border: 1px solid var(--gold) !important;
    color: var(--gold) !important;
    box-shadow: none !important;
    backdrop-filter: none !important;
    font-family: 'Cinzel', serif !important;
    text-transform: uppercase;
    font-size: 0.7rem !important;
    letter-spacing: 0.5px;
}

/* Modal overrides */
.glass-modal {
    background: linear-gradient(135deg, #2d1f18, #37251d) !important;
    border: 1px solid var(--gold) !important;
    backdrop-filter: none !important;
    box-shadow: var(--shadow) !important;
}

/* Selection chips (mine-chip) */
.mine-chip {
    background: var(--bg0) !important;
    border: 1px solid var(--gold) !important;
    color: var(--gold) !important;
}

.mine-chip input[type="checkbox"] {
    accent-color: var(--gold) !important;
}

/* Spell Thumb/Image container */
.spell-thumb,
.spell-thumb.v2 {
    border-bottom: 1px solid var(--gold) !important;
    background: transparent !important;
}

/* Soft buttons in cards */
.btn-soft,
.btn-soft.v2 {
    background: var(--bg1) !important;
    border: 1px solid var(--stroke) !important;
    color: var(--text-primary) !important;
    font-family: 'Cinzel', serif !important;
}

.btn-soft:hover,
.btn-soft.v2:hover {
    border-color: var(--gold) !important;
    color: var(--gold) !important;
    background: rgba(212, 175, 55, 0.1) !important;
}

/* Mini pills in cards */
.mini-pill,
.spell-tag,
.level-summary-pill,
.slot-pill {
    background: #2d1f18 !important;
    border: 1px solid var(--stroke) !important;
    color: var(--text-secondary) !important;
    backdrop-filter: none !important;
}

.mini-pill b,
.slot-value {
    color: var(--gold) !important;
}

/* Slots bar */
.slots-bar {
    background: #1e140d !important;
    border: 1px solid var(--gold) !important;
    backdrop-filter: none !important;
}

.slot-btn {
    background: var(--bg1) !important;
    border: 1px solid var(--gold) !important;
    color: var(--gold) !important;
}

/* Hide orbs in fantasy theme */
.bg-orb {
    display: none !important;
}

/* Feature/Invocation specific tweaks */
.feature-body,
.invocation-body,
.spell-body,
.spell-body.v2 {
    /* Ensure text color is correct */
    color: var(--text-primary) !important;
}

.spell-sub,
.spell-sub.v2 {
    color: var(--text-secondary) !important;
    font-family: 'Cinzel', serif !important;
}

/* Highlight "is-mine" cards with gold glow instead of green */
.spell-card.v2.is-mine {
    box-shadow: 0 0 15px rgba(212, 175, 55, 0.3) !important;
    border-color: var(--gold) !important;
}

/* Saved Spells/Features/Invocations List Items */
.mini-row {
    background-color: var(--bg1) !important;
    border: 1px solid var(--gold) !important;
    color: var(--text-primary) !important;
    padding: 0.5rem !important;
    margin-bottom: 0.25rem !important;
    border-radius: 4px !important;
    display: flex;
    align-items: center;
    box-shadow: none !important;
    backdrop-filter: none !important;
    transition: all 0.2s ease-in-out;
}

.mini-row span {
    color: var(--text-primary) !important;
    font-family: 'Cinzel', serif !important;
    font-size: 0.9em;
}

.mini-row .text-mutedish {
    color: var(--text-secondary) !important;
}

.mini-row:hover {
    background-color: var(--bg0) !important;
    box-shadow: 0 0 10px rgba(212, 175, 55, 0.3) !important;
    cursor: pointer;
    transform: translateX(2px);
}
